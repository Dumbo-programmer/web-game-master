<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-firestore.js"></script>   
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>Profile</title>
  </head>
  <body>
    <h1>My Profile</h1>

    <img id="pr" src="https://via.placeholder.com/350x150" class=" mx-auto d-block" alt="..."><button type="button" class="btn btn-link" id="editp" data-bs-toggle="modal" data-bs-target="#exampleModalCenteredScrollable">Edit</button>

<br>
<h2 class="text-start" id="usr">Name: </h2><button type="button" class="btn btn-link" id="edit" data-bs-toggle="modal" data-bs-target="#exampleModal">change</button>
<br>   
<br>

<!--Start-->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Set Name</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <input type="text" id="name" class="form-control">
        </div>
        <div class="modal-footer">
            <p id="t"></p>
          <button type="button" class="btn btn-outline-danger" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-outline-info" id="save">Save changes</button>
        </div>
      </div>
    </div>
  </div>
<!--END-->
<!--Warriors_concept-->
<div class="modal fade" id="exampleModalCenteredScrollable" tabindex="-1" aria-labelledby="exampleModalCenteredScrollableTitle" style="display: none;" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalCenteredScrollableTitle">Change Avatar</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
      
        <div class="container">
          <div class="row">
            <div class="col">
              <input type="image" id="1" src="Concept_warrior_01.png" class="img-thumbnail" alt="...">
            </div>
            <div class="col">
              <input type="image" id="2" src="Concept_warrior_02.png" class="img-thumbnail" alt="...">
            </div>
            <div class="col">
              <input type="image" id="3" src="Concept_warrior_03.png" class="img-thumbnail" alt="...">
            </div>
            <div class="col">
              <input type="image" id="4" src="Concept_warrior_04.png" class="img-thumbnail" alt="...">
            </div>
            <div class="col">
              <input type="image" id="5" src="Concept_warrior_05.png" class="img-thumbnail" alt="...">
            </div>
            <div class="col">
              <input type="image" id="6" src="Concept_warrior_06.png" class="img-thumbnail" alt="...">
            </div>
            <div class="col">
              <input type="image" id="7" src="Concept_warrior_07.png" class="img-thumbnail" alt="...">
            </div>
            <div class="col">
              <input type="image" id="8" src="Concept_warrior_08.png" class="img-thumbnail" alt="...">
            </div>
            <div class="col">
              <input type="image" id="9" src="Concept_warrior_09.png" class="img-thumbnail" alt="...">
            </div>
            <div class="col">
              <input type="image" id="10" src="Girl_warrior.png" class="img-thumbnail" alt="...">
            </div>




          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
        <button type="button" id="psave" class="btn btn-success">Save changes</button>
      </div>
    </div>
  </div>
</div>

<!--2nd modal end-->
<h2 class="text-start" id="email">Email: </h2>

<style>
  @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
     
  .col input[type=image]{
    width: 128px;
    height: 125px;
    max-width: 1400px !important;
}
.col input[type=image]:hover{
  border: 3px solid #32ff98;
}
.col input[type=image]:focus{
  border: 3px solid #12b7f8;
}
        body{
              font-family: 'VT323', monospace;
             font-size: 19px;
             text-align: center;
             background-color: antiquewhite;
         }
         h1{
             text-align: center;
           
         }
    
     img{
         border-radius: 100px;
         height: 160px;
         width: 160px; 
         
     }
  
</style>
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDRFSxiFa5Lq86LA5GhalETIJNFfn5kmnQ",
    authDomain: "game-web-app-b922d.firebaseapp.com",
    projectId: "game-web-app-b922d",
    storageBucket: "game-web-app-b922d.appspot.com",
    messagingSenderId: "734965289853",
    appId: "1:734965289853:web:8ab56fdefe80306b56b214",
    measurementId: "G-QJCFXWCEK8"
  };

firebase.initializeApp(firebaseConfig);
var db = firebase.firestore()
document.getElementById('save').addEventListener('click', function(){
var name = document.getElementById('name').value;
var func = localStorage.getItem('temp2')
if(localStorage.getItem('temp2')){
  del(func)
  localStorage.setItem('temp2', name)
  send(); 
}else{
  localStorage.setItem('temp2', name)
send(); 
}

   
})
function del(func){
  db.collection('names').doc(func).delete()
}
function send(){
    var name = document.getElementById('name').value;
db.collection('credits').doc(localStorage.getItem("ID")).set({
username: name
}, {merge: true})
db.collection('names').doc(name).set({
name: name
}, {merge:true})
document.getElementById('t').innerText = "Name updated" || console.error('error');
}

db.collection('credits').doc(localStorage.getItem("ID")).get().then((doc) => {
document.getElementById('usr').innerText = "Name: "+doc.data().username
console.log(doc.data().username)
})

if(localStorage.getItem('profilepic')<10){
const i = localStorage.getItem('profilepic')

document.getElementById('pr').src = 'Concept_warrior_0'+i+'.png'
}else if(localStorage.getItem('profilepic') == "10"){
  document.getElementById('pr').src = 'Girl_warrior.png'


}else{
  document.getElementById('pr').src='https://via.placeholder.com/350x150'
}


document.getElementById('1').addEventListener('click', function(){
  localStorage.setItem('profilepic', '1')
  console.log('1')
})
document.getElementById('2').addEventListener('click', function(){
  localStorage.setItem('profilepic', '2')
  console.log('2')
})
document.getElementById('3').addEventListener('click', function(){
  localStorage.setItem('profilepic', '3')
  console.log('3')
})
document.getElementById('4').addEventListener('click', function(){
  localStorage.setItem('profilepic', '4')
  console.log('4')
})
document.getElementById('5').addEventListener('click', function(){
  localStorage.setItem('profilepic', '5')
  console.log('5')
})
document.getElementById('6').addEventListener('click', function(){
  localStorage.setItem('profilepic', '6')
  console.log('6')
})
document.getElementById('7').addEventListener('click', function(){
  localStorage.setItem('profilepic', '7')
  console.log('7')
})
document.getElementById('8').addEventListener('click', function(){
  localStorage.setItem('profilepic', '8')
  console.log('8')
})
document.getElementById('9').addEventListener('click', function(){
  localStorage.setItem('profilepic', '9')
  console.log('9')
})
document.getElementById('10').addEventListener('click', function(){
  localStorage.setItem('profilepic', '10')
  console.log('10')
})

document.getElementById('psave').addEventListener('click', function(){
var i = localStorage.getItem('profilepic')
if(i<10){
db.collection('credits').doc(localStorage.getItem("ID")).set({
profilepic: "Concept_warrior_0"+i+'.png'
  }, {merge: true})

db.collection('names').doc(localStorage.getItem("temp2")).set({
profilepic: "Concept_warrior_0"+i+'.png'
  }, {merge: true})
}else{
  db.collection('credits').doc(localStorage.getItem("ID")).set({
profilepic: "Concept_warrior_"+i+'.png'
  }, {merge: true})

db.collection('names').doc(localStorage.getItem("temp2")).set({
profilepic: "Concept_warrior_"+i+'.png'
  }, {merge: true})
}
})
document.getElementById('email').innerText = "Email: "+localStorage.getItem('ID')
</script>
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  </body>
</html>
